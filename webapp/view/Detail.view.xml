<mvc:View
  controllerName="in.asint.task.taskm.controller.Detail"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m"
  xmlns:core="sap.ui.core">

  <Page id="page" title="{i18n>title}">
    <content>

      <Toolbar id="toolbar">
        <Title id="titlee" text="Customers" level="H2" />
        <ToolbarSpacer id="toolbarSpacerr" />

        <Select id="selectt"
          width="180px"
          change=".onSortCustomers">
          <items>
            <core:Item id="itemm" key="CompanyName" text="Sort by Company Name" />
            <core:Item id="item1" key="City" text="Sort by City" />
          </items>
        </Select>

        <SearchField id="searchfield"
          placeholder="Search by Company Name"
          liveChange=".onFilterCustomers"
          width="50%" />

        <Button 
          id="themeButton"
          text="Toggle Dark/Light"
          press=".onToggleTheme" />
      </Toolbar>

      <Table
        id="customerTable"
        items="{
          path: '/Customers'
        }">
        <columns>
          <Column id="column"><Text id="textt" text="ID" /></Column>
          <Column id="column1"><Text id="texttt" text="Company Name" /></Column>
          <Column id="columnnn"><Text id="texxt" text="City" /></Column>
        </columns>
        <items>
          <ColumnListItem id="columnlistitem" press=".onCustomerPress" type="Active">
            <cells>
              <Text id="text12" text="{CustomerID}" />
              <Text id="text23" text="{CompanyName}" />
              <Text id="text34" text="{City}" />
            </cells>
          </ColumnListItem>
        </items>
      </Table>

      <VBox id="vboxx">
  <items>
<Title id="titl" text="Customer Count by City" level="H4"  class="sapUiSmallMarginBottom" />

    <viz:VizFrame
      id="idVizFrame"
      width="100%"
      height="400px"
      vizType="pie"
      xmlns:viz="sap.viz.ui5.controls"
      xmlns:viz.data="sap.viz.ui5.data"
      xmlns:viz.feeds="sap.viz.ui5.controls.common.feeds">
      
      <viz:dataset>
        <viz.data:FlattenedDataset data="{/Customers}">
          <viz.data:dimensions>
            <viz.data:DimensionDefinition name="City" value="{City}" />
          </viz.data:dimensions>
          <viz.data:measures>
            <viz.data:MeasureDefinition name="Count" value="1" />
          </viz.data:measures>
        </viz.data:FlattenedDataset>
      </viz:dataset>

      <viz:feeds>
        <viz.feeds:FeedItem uid="size" type="Measure" values="Count" />
        <viz.feeds:FeedItem uid="color" type="Dimension" values="City" />
      </viz:feeds>
    </viz:VizFrame>
  </items>
  
</VBox>

    </content>
  </Page>
</mvc:View>
